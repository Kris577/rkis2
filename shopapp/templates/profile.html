
{% extends 'base.html' %}

{% block title %}Профиль{% endblock %}

{% block content %}
<div class="profile">
  <h1>Пользователь: {{ user.username }}</h1>
  <p><strong>Фамилия:</strong> {{ user.last_name }}</p>
  <p><strong>Имя:</strong> {{ user.first_name }}</p>
  <p><strong>Почта:</strong> {{ user.email }}</p>

  {% if user.avatar %}
    <img src="{{ user.avatar.url }}" alt="Аватар" class="img-thumbnail" style="max-width: 200px;">
  {% endif %}

  <div class="mt-3">
    <a href="{% url 'shopapp:update_user' %}" class="btn btn-outline-primary">Изменить профиль</a>
    <a href="{% url 'shopapp:delete_user' %}" class="btn btn-outline-danger">Удалить профиль</a>
  </div>
</div>

<hr>

<h2>Посты пользователя ({{ user.posts.count }})</h2>

{% for post in posts %}
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">{{ post.title }}</h5>
      <p class="card-text">{{ post.content|truncatewords:20 }}</p>
      <p class="text-muted">
        Дата публикации: {{ post.created_at }}
        | Комментариев: {{ post.comments.count }}
        | Лайков: {{ post.likes.count }}
      </p>
      <a href="{% url 'shopapp:post_detail' post.pk %}" class="btn btn-sm btn-primary">Читать далее</a>
    </div>
  </div>
{% empty %}
  <p>У пользователя пока нет постов.</p>
{% endfor %}

<nav aria-label="Пагинация профиля">
  <ul class="pagination justify-content-center">
    {% if posts.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ posts.previous_page_number }}">Предыдущая</a>
      </li>
    {% endif %}

    <li class="page-item disabled">
      <span class="page-link">Стр. {{ posts.number }} из {{ posts.paginator.num_pages }}</span>
    </li>

    {% if posts.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ posts.next_page_number }}">Следующая</a>
      </li>
    {% endif %}
  </ul>
</nav>

{% endblock %}